# 唠叨
多线程编程在任何语言中都是比较难的存在，作为Java程序员，开发多线程的时候也经历过头大的时候，因为他确实不容易学，但是确实面试时重点考察的内容，如果工作中不仅仅是CRUD，
那么使用多线程的情况还是挺多的。要求也是挺高的。
# 并发和并行
提到多线程，并发和并行是无法避开的话题，很多人不理解其含义。这里我说明下：
并发：主要是针对一个CPU说的，在一个CPU上，多个任务被CPU分配给不同的时间片执行，CPU上下文被切换，给人的感觉就是都在执行。
并行：这是真正地并列执行。说的是多个CPU，每个CPU上执行具体的一个任务。
# 协程
协程并不是Go的专有概念，其实很多语言都有这个设计。
协程是Go中的最小执行单元，它是轻量级的线程（不是线程）。
# 语法
go中协程使用非常简单，只需要在方法前使用go关键字即可。
```go
package main

import "fmt"

func main() {
	go func() {
		fmt.Println("协程方法执行完毕")
	}()
	fmt.Println("main方法执行完毕") // main方法执行完毕
}
```
运行结果是：
协程方法并没有运行，这并不是说协程创建的不对，这是因为main协程并没有等待子协程执行，换句话说main执行地太快了，子协程没来的及执行。
先睡眠下主协程。
```go
package main

import (
	"fmt"
	"time"
)

func main() {
	go func() {
		fmt.Println("协程方法执行完毕") // 协程方法执行完毕
	}()
	time.Sleep(1 * time.Second)
	fmt.Println("main方法执行完毕") // main方法执行完毕
}
```
结果就是协程也执行了，但是实际开发中肯定不能用sleep。因为你也不知道该sleep多久吧？

# 使用场景
* 当一个大任务可以分割开来分别执行的时候。
* 当向不同的API端点发出多个请求的时候（比如购买付款后，发送短信、发送站内信等）
* 任何可以利用多核CPU的工作都可以使用协程优化（不影响实际业务最终结果）
* 处理一个大的SQL文件以将其存储到数据库中
还有很多很多场景。